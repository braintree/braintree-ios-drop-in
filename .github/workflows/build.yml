name: Build
on: [pull_request, workflow_dispatch]
jobs:
  cocoapods_xcode_13:
    name: CocoaPods (Xcode 13)
    runs-on: macOS-12
    steps:
      - name: Check out repository
        uses: actions/checkout@v2
      - name: Use Xcode 13
        run: sudo xcode-select -switch /Applications/Xcode_13.4.app
      - name: Run pod lib lint
        run: pod lib lint
      - name: Publish to CocoaPods
        env:
          COCOAPODS_TRUNK_TOKEN: ${{ secrets.COCOAPODS_TRUNK_TOKEN }}
        run: pod trunk push BraintreeDropIn.podspec
